{"version":3,"file":"js/630.e8828cad.js","mappings":"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","sources":["webpack://in-job/./src/views/FactuasView.vue","webpack://in-job/./src/views/FactuasView.vue?8dd4"],"sourcesContent":["<template>\r\n  \r\n  <div class=\"container\">\r\n    <AppNav /> <!-- Usa el componente AppNav aquí -->\r\n    <br>\r\n    <br>\r\n    <br>\r\n    <h2>Formulario Dinámico de Productos</h2>\r\n    <form @submit.prevent=\"guardarProductos\">\r\n      <div class=\"form-group\">\r\n        <label for=\"fecha\">Fecha</label>\r\n        <input type=\"date\" id=\"fecha\" class=\"form-control\" v-model=\"venta.fecha\" required />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"producto\">Producto</label>\r\n        <div id=\"productosBotones\" class=\"mb-3\">\r\n          <h4 class=\"text-info\">Selecciona un producto:</h4>\r\n          <button\r\n            v-for=\"(prod, index) in productos\"\r\n            :key=\"index\"\r\n            class=\"btn btn-success m-2\"\r\n            @click.prevent=\"seleccionarProducto(prod.nombre, prod.precio)\"\r\n          >\r\n            {{ prod.nombre }} - ${{ prod.precio }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Tabla de Productos Seleccionados -->\r\n      <div v-if=\"productosSeleccionados.length > 0\" class=\"mb-3\">\r\n        <h4 class=\"text-info\">Productos Seleccionados:</h4>\r\n        <table class=\"table table-bordered\">\r\n          <thead>\r\n            <tr>\r\n              <th>Producto</th>\r\n              <th>Precio</th>\r\n              <th>Cantidad</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(producto, index) in productosSeleccionados\" :key=\"index\">\r\n              <td>{{ producto.nombre }}</td>\r\n              <td>${{ producto.precio }}</td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  class=\"form-control\"\r\n                  v-model.number=\"producto.cantidad\"\r\n                  min=\"1\"\r\n                  @input=\"actualizarTotal()\"\r\n                />\r\n              </td>\r\n              <td>${{ producto.precio * producto.cantidad }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <!-- Previsualizador de Total -->\r\n        <div class=\"mt-3\">\r\n          <h5>Total: ${{ calcularTotal() }}</h5>\r\n        </div>\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"botonDeshabilitado\">\r\n        Guardar Venta\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AppNav from '@/components/AppNav.vue'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Swal from 'sweetalert2';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'FactuasView', // Esta línea debe estar dentro del objeto `export default`\r\n  components: {\r\n    AppNav // Asegúrate de que el nombre del componente coincida con el archivo\r\n  },\r\n  data() {\r\n    return {\r\n      venta: {\r\n        fecha: '',\r\n      },\r\n      \r\n      productos: [\r\n        { nombre: 'Avena', precio: 1000 },\r\n        { nombre: 'Empanada de Pollo', precio: 1500 },\r\n        { nombre: 'Empanada de Jamón y Queso', precio: 1500 },\r\n        { nombre: 'Empanada de Queso', precio: 1500 },\r\n        { nombre: 'Empanada Hawaiana', precio: 1500 },\r\n        { nombre: 'Combo 3 Empanadas y 1 Avena', precio: 5000 },\r\n        { nombre: 'Combo 5 Empanadas y 1 Avena', precio: 8000 },\r\n      ],\r\n      productosSeleccionados: [],\r\n      botonDeshabilitado: false,\r\n    };\r\n  },\r\n  methods: {\r\n    seleccionarProducto(nombre, precio) {\r\n      const productoExistente = this.productosSeleccionados.find(prod => prod.nombre === nombre);\r\n      if (!productoExistente) {\r\n        this.productosSeleccionados.push({ nombre, precio, cantidad: 1 });\r\n      } else {\r\n        productoExistente.cantidad++;\r\n      }\r\n    },\r\n    actualizarTotal() {\r\n      // Actualiza automáticamente los totales\r\n      this.productosSeleccionados.forEach(\r\n        prod => (prod.total = prod.precio * prod.cantidad)\r\n      );\r\n    },\r\n    calcularTotal() {\r\n      // Calcula el total acumulado\r\n      return this.productosSeleccionados.reduce(\r\n        (total, prod) => total + prod.precio * prod.cantidad,\r\n        0\r\n      );\r\n    },\r\n    async guardarProductos() {\r\n      this.botonDeshabilitado = true;\r\n\r\n      if (!this.venta.fecha || this.productosSeleccionados.length === 0) {\r\n        Swal.fire('Error', 'Por favor, complete todos los campos.', 'error');\r\n        this.botonDeshabilitado = false;\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const productosNombres = this.productosSeleccionados\r\n          .map(prod => prod.nombre)\r\n          .join(' + ');\r\n        const productosPrecio = this.calcularTotal();\r\n        const productosCantidad = this.productosSeleccionados.reduce(\r\n          (total, prod) => total + prod.cantidad,\r\n          0\r\n        );\r\n\r\n        await axios.post('/facturas', {\r\n          fecha: this.venta.fecha,\r\n          producto: productosNombres,\r\n          precio: productosPrecio,\r\n          cantidad: productosCantidad,\r\n        });\r\n\r\n        const horaActual = new Date().toLocaleTimeString();\r\n        Swal.fire(\r\n          'Venta Guardada',\r\n          `La venta fue guardada con éxito.\\nTotal: $${productosPrecio}\\nHora: ${horaActual}`,\r\n          'success'\r\n        );\r\n\r\n        this.productosSeleccionados = [];\r\n        this.venta.fecha = '';\r\n      } catch (error) {\r\n        Swal.fire('Error', 'Hubo un error al guardar la venta.', 'error');\r\n      } finally {\r\n        this.botonDeshabilitado = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  margin-top: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.btn {\r\n  margin-top: 15px;\r\n}\r\n\r\ntable th, table td {\r\n  text-align: center;\r\n}\r\n\r\ntable td input {\r\n  width: 60px;\r\n}\r\n</style>\r\n","import { render } from \"./FactuasView.vue?vue&type=template&id=0f5f56e5&scoped=true\"\nimport script from \"./FactuasView.vue?vue&type=script&lang=js\"\nexport * from \"./FactuasView.vue?vue&type=script&lang=js\"\n\nimport \"./FactuasView.vue?vue&type=style&index=0&id=0f5f56e5&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0f5f56e5\"]])\n\nexport default __exports__"],"names":["class","id","key","_createElementBlock","_hoisted_1","_createVNode","_component_AppNav","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","guardarProductos","_hoisted_2","for","type","$event","$data","venta","fecha","required","_hoisted_3","_hoisted_4","_Fragment","_renderList","productos","prod","index","onClick","seleccionarProducto","nombre","precio","_toDisplayString","_hoisted_5","productosSeleccionados","length","_hoisted_6","_hoisted_7","producto","cantidad","min","onInput","actualizarTotal","_hoisted_8","number","_hoisted_9","calcularTotal","_createCommentVNode","disabled","botonDeshabilitado","_hoisted_10","name","components","AppNav","data","methods","productoExistente","this","find","push","forEach","total","reduce","Swal","productosNombres","map","join","productosPrecio","productosCantidad","axios","post","horaActual","Date","toLocaleTimeString","error","__exports__","render"],"sourceRoot":""}