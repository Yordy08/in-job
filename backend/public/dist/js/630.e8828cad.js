"use strict";(self["webpackChunkin_job"]=self["webpackChunkin_job"]||[]).push([[630],{1630:function(o,a,e){e.r(a),e.d(a,{default:function(){return P}});var t=e(6768),n=e(5130),c=e(4232);const r={class:"container"},l={class:"form-group"},d={class:"form-group"},s={id:"productosBotones",class:"mb-3"},i=["onClick"],u={key:0,class:"mb-3"},p={class:"table table-bordered"},b=["onUpdate:modelValue"],m={class:"mt-3"},h=["disabled"];function k(o,a,e,k,f,v){const L=(0,t.g2)("AppNav");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(L),a[8]||(a[8]=(0,t.Lk)("br",null,null,-1)),a[9]||(a[9]=(0,t.Lk)("br",null,null,-1)),a[10]||(a[10]=(0,t.Lk)("br",null,null,-1)),a[11]||(a[11]=(0,t.Lk)("h2",null,"Formulario Dinámico de Productos",-1)),(0,t.Lk)("form",{onSubmit:a[2]||(a[2]=(0,n.D$)(((...o)=>v.guardarProductos&&v.guardarProductos(...o)),["prevent"]))},[(0,t.Lk)("div",l,[a[3]||(a[3]=(0,t.Lk)("label",{for:"fecha"},"Fecha",-1)),(0,t.bo)((0,t.Lk)("input",{type:"date",id:"fecha",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=o=>f.venta.fecha=o),required:""},null,512),[[n.Jo,f.venta.fecha]])]),(0,t.Lk)("div",d,[a[5]||(a[5]=(0,t.Lk)("label",{for:"producto"},"Producto",-1)),(0,t.Lk)("div",s,[a[4]||(a[4]=(0,t.Lk)("h4",{class:"text-info"},"Selecciona un producto:",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(f.productos,((o,a)=>((0,t.uX)(),(0,t.CE)("button",{key:a,class:"btn btn-success m-2",onClick:(0,n.D$)((a=>v.seleccionarProducto(o.nombre,o.precio)),["prevent"])},(0,c.v_)(o.nombre)+" - $"+(0,c.v_)(o.precio),9,i)))),128))])]),f.productosSeleccionados.length>0?((0,t.uX)(),(0,t.CE)("div",u,[a[7]||(a[7]=(0,t.Lk)("h4",{class:"text-info"},"Productos Seleccionados:",-1)),(0,t.Lk)("table",p,[a[6]||(a[6]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Producto"),(0,t.Lk)("th",null,"Precio"),(0,t.Lk)("th",null,"Cantidad"),(0,t.Lk)("th",null,"Total")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(f.productosSeleccionados,((o,e)=>((0,t.uX)(),(0,t.CE)("tr",{key:e},[(0,t.Lk)("td",null,(0,c.v_)(o.nombre),1),(0,t.Lk)("td",null,"$"+(0,c.v_)(o.precio),1),(0,t.Lk)("td",null,[(0,t.bo)((0,t.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":a=>o.cantidad=a,min:"1",onInput:a[1]||(a[1]=o=>v.actualizarTotal())},null,40,b),[[n.Jo,o.cantidad,void 0,{number:!0}]])]),(0,t.Lk)("td",null,"$"+(0,c.v_)(o.precio*o.cantidad),1)])))),128))])]),(0,t.Lk)("div",m,[(0,t.Lk)("h5",null,"Total: $"+(0,c.v_)(v.calcularTotal()),1)])])):(0,t.Q3)("",!0),(0,t.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:f.botonDeshabilitado}," Guardar Venta ",8,h)],32)])}e(4114),e(8992),e(2577),e(3949),e(1454),e(8872);var f=e(4871),v=e(4874),L=e.n(v),E=e(4373),S={name:"FactuasView",components:{AppNav:f.A},data(){return{venta:{fecha:""},productos:[{nombre:"Avena",precio:1e3},{nombre:"Empanada de Pollo",precio:1500},{nombre:"Empanada de Jamón y Queso",precio:1500},{nombre:"Empanada de Queso",precio:1500},{nombre:"Empanada Hawaiana",precio:1500},{nombre:"Combo 3 Empanadas y 1 Avena",precio:5e3},{nombre:"Combo 5 Empanadas y 1 Avena",precio:8e3}],productosSeleccionados:[],botonDeshabilitado:!1}},methods:{seleccionarProducto(o,a){const e=this.productosSeleccionados.find((a=>a.nombre===o));e?e.cantidad++:this.productosSeleccionados.push({nombre:o,precio:a,cantidad:1})},actualizarTotal(){this.productosSeleccionados.forEach((o=>o.total=o.precio*o.cantidad))},calcularTotal(){return this.productosSeleccionados.reduce(((o,a)=>o+a.precio*a.cantidad),0)},async guardarProductos(){if(this.botonDeshabilitado=!0,!this.venta.fecha||0===this.productosSeleccionados.length)return L().fire("Error","Por favor, complete todos los campos.","error"),void(this.botonDeshabilitado=!1);try{const o=this.productosSeleccionados.map((o=>o.nombre)).join(" + "),a=this.calcularTotal(),e=this.productosSeleccionados.reduce(((o,a)=>o+a.cantidad),0);await E.A.post("/facturas",{fecha:this.venta.fecha,producto:o,precio:a,cantidad:e});const t=(new Date).toLocaleTimeString();L().fire("Venta Guardada",`La venta fue guardada con éxito.\nTotal: $${a}\nHora: ${t}`,"success"),this.productosSeleccionados=[],this.venta.fecha=""}catch(o){L().fire("Error","Hubo un error al guardar la venta.","error")}finally{this.botonDeshabilitado=!1}}}},y=e(1241);const C=(0,y.A)(S,[["render",k],["__scopeId","data-v-0f5f56e5"]]);var P=C}}]);
//# sourceMappingURL=630.e8828cad.js.map