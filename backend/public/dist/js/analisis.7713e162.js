"use strict";(self["webpackChunkin_job"]=self["webpackChunkin_job"]||[]).push([[857],{54:function(t,o,a){a.r(o),a.d(o,{default:function(){return k}});var n=a(6768),r=a(4232);const s={class:"container"},e={key:0},d={key:1},c={class:"table table-bordered"};function l(t,o,a,l,u,i){return(0,n.uX)(),(0,n.CE)("div",s,[o[3]||(o[3]=(0,n.Lk)("h2",null,"Análisis de Ventas",-1)),u.loading?((0,n.uX)(),(0,n.CE)("div",e,o[0]||(o[0]=[(0,n.Lk)("p",null,"Cargando datos, por favor espera...",-1)]))):((0,n.uX)(),(0,n.CE)("div",d,[o[2]||(o[2]=(0,n.Lk)("h3",null,"Productos más vendidos",-1)),(0,n.Lk)("table",c,[o[1]||(o[1]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"#"),(0,n.Lk)("th",null,"Producto"),(0,n.Lk)("th",null,"Cantidad Vendida")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.topProductos,((t,o)=>((0,n.uX)(),(0,n.CE)("tr",{key:t.nombre},[(0,n.Lk)("td",null,(0,r.v_)(o+1),1),(0,n.Lk)("td",null,(0,r.v_)(t.nombre),1),(0,n.Lk)("td",null,(0,r.v_)(t.cantidad),1)])))),128))])])]))])}a(8992),a(1454),a(8872);var u={data(){return{productos:[],topProductos:[],loading:!0}},methods:{async cargarDatos(){try{const t="https://script.google.com/macros/s/AKfycbzgj6MEHGwaiAYS24H8GNIZRDuZwkSsgkJFDDqsoE4byqMrdgJsic9R6kRxWeIQQu1f/exec",o=await fetch(t),a=await o.json();if("success"===a.status){const{facturacion:t,domicilio:o}=a,n=t.map((t=>({nombre:t[1],cantidad:parseInt(t[3],10)}))),r=o.map((t=>{const o=t[5].split(", ").map((t=>{const[o,a]=t.split(" (");return{nombre:o.trim(),cantidad:parseInt(a,10)}}));return o})).flat();this.productos=[...n,...r];const s=this.productos.reduce(((t,o)=>(t[o.nombre]=(t[o.nombre]||0)+o.cantidad,t)),{}),e=Object.entries(s).map((([t,o])=>({nombre:t,cantidad:o}))).sort(((t,o)=>o.cantidad-t.cantidad));this.topProductos=e.slice(0,2),console.log("Top productos:",this.topProductos)}else console.error("Error en la respuesta de la API:",a.message)}catch(t){console.error("Error al cargar los datos:",t)}finally{this.loading=!1}}},mounted(){this.cargarDatos()}},i=a(1241);const p=(0,i.A)(u,[["render",l],["__scopeId","data-v-95e88932"]]);var k=p}}]);
//# sourceMappingURL=analisis.7713e162.js.map